<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--360浏览器优先以webkit内核解析-->


    <title>社团管理首页-校园新鲜</title>

    <!--    要放前面！-->
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>


    <link rel="shortcut icon" href="favicon.ico">
    <link href="/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="/css/font-awesome.css?v=4.4.0" rel="stylesheet">

    <link href="/css/animate.css" rel="stylesheet">
    <link href="/css/style.css?v=4.1.0" rel="stylesheet">

</head>

<body class="gray-bg">
    <div class="row  border-bottom white-bg dashboard-header">
        <div class="col-sm-12">
            <blockquote class="text-warning" style="font-size:14px">注：一下新闻仅为开发者创作，不具有真实性，请同学们谨慎上网！
                <br>诸多缺陷，敬请期待。。
                <h4 class="text-danger">今天有什么八卦呢？</h4>
            </blockquote>

            <hr>
        </div>

    </div>
    <div class="wrapper wrapper-content">
        <div class="row">
            <div class="col-sm-3">

                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>广告位招聘</h5>
                    </div>
                    <div class="ibox-content">
                        <p>这个无敌的广告为可提供社团的曝光度</p>
                        <p>或者你有啥活动也可以在这里展示出来</p>
                        <ol>
                            <li>后期调用后台</li>
                            <li>把每一条的信息调出来在这展示</li>
                            <li>可以的话也试试调用图片</li>
                        </ol>
                    </div>
                </div>
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>联系信息</h5>

                    </div>
                    <div class="ibox-content">
                        <p><i class="fa fa-send-o"></i> 博客：<a href="http://www.baidu.com"
                                target=" _blank">http://www.baidu.com</a>
                        </p>
                        <p><i class="fa fa-qq"></i> QQ：<a href="https://qqapp.qq.com/app/353.html"
                                target="_blank">1478337513</a>
                        </p>
                        <p><i class="fa fa-weixin"></i> 微信：<a href="javascript:;">XinjianCHEN</a>
                        </p>
                        <p><i class="fa fa-credit-card"></i> 支付宝：<a href="javascript:;" class="支付宝信息">芜湖好耶
                            </a>
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-sm-9">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>今日新鲜 按数据库读取顺序，最新放前面</h5>
                    </div>
                    <div class="ibox-content no-padding">
                        <div class="panel-body">
                            <div class="panel-group" id="version">


                                </div>


                                <div id="newslistDiv"></div>
                                <div id="newsClublistDiv"></div>

                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h5 class="panel-title">
                                            <a data-toggle="collapse" data-parent="#version" href="#006">文本样式</a><code
                                                class="pull-right">datatime</code>
                                        </h5>
                                    </div>
                                    <div id="006" class="panel-collapse collapse">
                                        <div class="panel-body">
                                            <p><span class="badge badge-primary">绿色健康</span>
                                            </p>
                                            <p><span class="badge badge-danger">请勿模仿</span>
                                            </p>
                                            <ol>
                                                <li>今天是情人节，H+终于跨到了v3.0，就是是情人节礼物吧，感谢你们的不离不弃，一路相伴！ <a href="#"
                                                        class="viewlog"><i class="fa fa-eye"></i> 查看升级日志</a>
                                                </li>
                                                <li><span class="text-danger">注意：</span>本次更新调整较大，不建议直接覆盖升级！</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script id="welcome-template" type="text/x-handlebars-template">
        <div class="border-bottom white-bg page-heading clearfix">
            <h2>更新日志：</h2>
            <div>今天是情人节，H+终于跨到了v3.0，就算是情人节礼物吧，感谢你们的不离不弃，一路相伴！</div>
            <div class="pull-right">——Beau-zihan / 2015.8.20</div>
        </div>
        <div class="m">
            <div class="tabs-container">
                <div class="tabs-left">
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a data-toggle="tab" href="#layouts"><i class="fa fa-columns"></i> 布局
                            </a>
                        </li>
                        <li>
                            <a data-toggle="tab" href="#new"><i class="fa fa-plus-square"></i> 新增
                            </a>
                        </li>
                        <li>
                            <a data-toggle="tab" href="#update"><i class="fa fa-arrow-circle-o-up"></i> 升级
                            </a>
                        </li>
                        <li>
                            <a data-toggle="tab" href="#revise"><i class="fa fa-pencil"></i> 修正
                            </a>
                        </li>
                        <li>
                            <a data-toggle="tab" href="#optimize"><i class="fa fa-magic"></i> 优化
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content" style="line-height:1.8em;">
                        <div id="layouts" class="tab-pane active">
                            <div class="panel-body">
                                <ol class="no-left-padding">
                                    <li class="text-danger"><b>推荐：</b>期待已久的contentTabs效果，支持关闭、双击刷新、左右滑动等；</li>
                                    <li>固定左侧主菜单栏，并对菜单项做了新的调整；</li>
                                    <li>增加右侧面板及聊天窗口等。</li>
                                </ol>

                                <p style="margin-left:25px;">
                                    <hr><span class="label label-danger">特别致谢</span> 感谢[子·梦]同学提供的contentTabs优化方案和代码！</p>
                            </div>
                        </div>
                        <div id="new" class="tab-pane">
                            <div class="panel-body">
                                <ol class="no-left-padding">
                                    <li>表单：搜索自动补全插件suggest、高级表单插件（时间选择，切换按钮，图像裁剪上传，单选复选框美化，文件域美化等)等；</li>
                                    <li>图表：图表组合页面等；</li>
                                    <li>页面：团队、社交、客户管理、文章列表、文章详情、新登录页面等；</li>
                                    <li>UI元素：竖向选项卡、拖动面板、文本对比、加载动画、SweetAlert等；</li>
                                    <li>相册：layer相册、Blueimp相册等；</li>
                                    <li>表格：FooTables等。</li>
                                </ol>
                            </div>
                        </div>
                        <div id="update" class="tab-pane">
                            <div class="panel-body">
                                <ol>
                                    <li>页面弹层插件layer升级至1.9.3；</li>
                                    <li>更新jqgrid，支持树形表格；</li>
                                    <li>更新帮助文档。</li>
                                </ol>
                            </div>
                        </div>
                        <div id="revise" class="tab-pane">
                            <div class="panel-body">
                                <ol>
                                    <li>jstree、Simditor等多处错误；</li>
                                    <li>页面加载进度提示；</li>
                                    <li>Glyphicon字体图标不显示的问题；</li>
                                    <li>重新整理开发文档；</li>
                                </ol>
                            </div>
                        </div>
                        <div id="optimize" class="tab-pane">
                            <div class="panel-body">
                                <ol>
                                    <li>H+整体视觉效果；</li>
                                    <li>jstree默认主题显示效果；</li>
                                    <li>表单验证显示效果；</li>
                                    <li>iCheck显示效果；</li>
                                    <li>Tabs显示效果。</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="alert alert-warning alert-dismissable m-t-sm">
                <button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
                同时这也是一个示例，演示了如何从iframe中弹出一个覆盖父页面的层。
            </div>
        </div>
    </script>

    <!-- 全局js -->
    <script src="/js/jquery.min.js?v=2.1.4"></script>
    <script src="/js/bootstrap.min.js?v=3.3.6"></script>
    <script src="/js/plugins/layer/layer.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>

    <!-- 自定义js -->
    <script src="/js/content.js"></script>


    <!-- 欢迎信息 -->
    <script src="/js/welcome.js"></script>


    <script type="text/javascript">
        $(document).ready(function () {
            let publishlist;
            let student;
            $.ajax({
                type: "POST",
                url: "/publish/getStudent",
                // dataType: "text",
                dataType: "json",
                async: false,
                success: function (data) {
                    console.log(data)
                    student = data.data;
                    return student;
                },
                error: function (data) {
                    alert("AJAX请求出错" + data);
                }
            })
            $.ajax({
                type: "POST",
                url: "/publish/AllPublish",
                // dataType: "text",
                dataType: "json",
                async: false,
                success: function (data) {
                    var iDIV = 1;
                    console.log(data);
                    var list=data.data;
                    console.log(list);
                    publishlist = data.data;
                    for(var num=data.data.length;num>0;num--){
                        
                        str1 =
                            '<div class="panel panel-default"><div class="panel-heading"><h5 class="panel-title"><a data-toggle="collapse" data-parent="#version" href="#' +
                            iDIV + '">'+list[num-1].title +'-->'+ getName(list[num-1].studentID) + '</a><code class="pull-right">' + list[num-1]
                            .datetime + '</code></h5></div>'

                        str2 = '<div id="' + iDIV +
                            '" class="panel-collapse collapse in"><div class="panel-body"><p><span class="badge badge-primary">个人发布</span></p>' +
                                list[num-1].text + '</p></div></div></div>'
                        iDIV++;
                        $("#newslistDiv").append(str1 + str2);
                        $("#username" + iDIV).append(student.studentName);
                    }
                    return publishlist;
                },
                error: function (data) {
                    alert("AJAX请求出错" + data);
                }
            })
            $.ajax({
                type: "POST",
                url: "/clubRecruit/getAllRecruit",
                // dataType: "text",
                dataType: "json",
                async: false,
                success: function (data) {
                    var iDIV = 100;
                    console.log(data);
                    var list=data.data;
                    console.log(list);
                    recruitlist = data.data;
                    for(var num=data.data.length;num>0;num--){
                        
                        str1 =
                            '<div class="panel panel-default"><div class="panel-heading"><h5 class="panel-title"><a data-toggle="collapse" data-parent="#version" href="#' +
                            iDIV + '">'+list[num-1].title +'-->'+ getName(list[num-1].studentID) + '</a><code class="pull-right">' + list[num-1]
                            .datetime + '</code></h5></div>'

                        str2 = '<div id="' + iDIV +
                            '" class="panel-collapse collapse in"><div class="panel-body"><p><span class="badge badge-danger">社团发布</span></p>' +
                                list[num-1].text + '</p></div></div></div>'
                        iDIV++;
                        $("#newslistDiv").append(str1 + str2);
                        $("#username" + iDIV).append(student.studentName);
                    }
                    return recruitlist;
                },
                error: function (data) {
                    alert("AJAX请求出错" + data);
                }
            })







        })
    </script>

    <script type="text/javascript">
        function getName(studentid){
            var name;
            $.ajax({
                type: "POST",
                url: "/publish/getStudentByID",
                // dataType: "text",
                data:{id:studentid},
                dataType: "json",
                async: false,
                success: function (data) {
                    console.log(data.data.studentName);
                    name=data.data.studentName;
                },
                error: function (data) {
                    alert("AJAX请求出错" + data);
                }  
            })
            return name;
        }
    </script>
</body>

</html>